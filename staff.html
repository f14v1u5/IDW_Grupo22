<!DOCTYPE html>
<html lang="es" data-bs-theme="light">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Staff - Cl√≠nica La Concordia</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="estilos/estilos.css" />
</head>
<body>
    <header>
        <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
            <div class="container">
                <a class="navbar-brand" href="/index.html">
                    <img src="img/logo_blanco_nav.png" alt="Cl√≠nica La Concordia" height="40">
                </a>

                <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                        data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false"
                        aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <button id="tema" class="btn btn-outline-light ms-3"></button>

                <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
                    <ul class="navbar-nav">
                        <li class="nav-item"><a class="nav-link" href="index.html">Inicio</a></li>
                        <li class="nav-item">
                            <a class="nav-link nav-turnos" href="turnos.html">Turnos</a>
                        </li>                           
                    </ul>
                </div>
            </div>
        </nav>
    </header>
    
    <main class="container mt-5 pt-4">
        <section id="staff" class="text-center mt-5 pt-4">
            <h2 class="mb-4">Nuestro equipo m√©dico</h2>
            <p class="mb-5">Contamos con profesionales comprometidos y altamente capacitados. Su salud en buenas manos...</p>
        </section>

        <div class="container mt-5">
            <div class="p-4 rounded shadow">
                <div class="row" id="contenedor-medicos"></div>
            </div>  
        </div>  
    </main>

    <footer class="footer bg-light text-dark mt-5 py-4">
        <div class="container">
            <div class="row">
                <div class="col-md-4 mb-3">
                    <h5>Contacto</h5>
                    <p>Direcci√≥n: Av. San Martin 123, Concordia, Entre R√≠os</p>
                    <p>Tel√©fono: (011) 2345-6789</p>
                </div>
                <div class="col-md-4 mb-3">
                    <h5>Enlaces</h5>
                    <a href="index.html" class="d-block text-dark">Inicio</a>
                    <a href="institucional.html" class="d-block text-dark">Institucional</a>
                    <a href="contacto.html" class="d-block text-dark">Contacto</a>
                </div>
                <div class="col-md-4 mb-3">
                    <h5>Horarios</h5>
                    <p>Lunes a Viernes: 8:00 - 18:00</p>
                    <p>S√°bados: 9:00 - 13:00</p>
                </div>
            </div>
            <div class="text-center mt-3">
                <p>&copy; 2025 Cl√≠nica La Concordia. Todos los derechos reservados.</p>
            </div>
        </div>
    </footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="/js/dark.js"></script>
<script src="/js/inicializarLocalStorage.js"></script>

<script>
document.addEventListener("DOMContentLoaded", async () => {
    try {
        // Obtenemos los m√©dicos desde localStorage
        const medicos = JSON.parse(localStorage.getItem("medicos")) || [];
        const contenedor = document.getElementById("contenedor-medicos");

        // Si no hay m√©dicos
        if (medicos.length === 0) {
        contenedor.innerHTML = `<p class="text-center">No hay m√©dicos registrados actualmente.</p>`;
        return;
        }

        // Creamos las cards
        medicos.forEach(medico => {
        let imagenSrc = "./img/medicos/generico.jpg";

        if (medico.imagenBase64) {
            // Limpiar posibles espacios o saltos de l√≠nea
            const fotoLimpia = medico.imagenBase64.trim();

            // Si ya tiene prefijo data:image, la usamos tal cual
            if (fotoLimpia.startsWith("data:image")) {
                imagenSrc = fotoLimpia;
                console.log("carga la fotoLimpia");
            } else {
                // Si no lo tiene, asumimos que es JPEG por defecto
                imagenSrc = `data:image/jpeg;base64,${fotoLimpia}`;
                console.log("Carga el defecto");
            }
        } else {
            console.log("foto vac√≠a");
        }

        console.log("üñºÔ∏è Cargando imagen para:", medico.nombre, imagenSrc.substring(0, 50));

        // Crea la card
        const card = document.createElement("div");
        card.className = "col-md-4 mb-4";
        card.innerHTML = `
            <div class="card h-100 shadow-sm">
            <img src="${imagenSrc}" class="card-img-top" alt="Imagen de ${medico.nombre} ${medico.apellido}">
            <div class="card-body">
                <h5 class="card-title">${medico.titulo || ''} ${medico.nombre} ${medico.apellido}</h5>
                <h6 class="card-subtitle mb-2 text-muted">${medico.especialidad}</h6>
                <p class="card-text">${medico.descripcion || ''}</p>
            </div>
            </div>
        `;
        contenedor.appendChild(card);
        });


    } catch (error) {
        console.error("Error cargando m√©dicos:", error);
    }
});
</script>

</body>
</html>
